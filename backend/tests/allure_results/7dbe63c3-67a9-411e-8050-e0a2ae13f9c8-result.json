{"name": "API Test: Update VM", "status": "failed", "statusDetails": {"message": "AssertionError: Expected 200, got 422\nassert 422 == 200\n +  where 422 = <Response [422]>.status_code", "trace": "self = <test_put_update_vm_api.TestVMUpdateAPI object at 0x7f1e46bad1d0>\n\n    @allure.title(\"API Test: Update VM\")\n    @allure.link(\"https://jira.cloud.ru/browse/TASK-PENDING\", name=\"Related Task\")\n    @allure.tag(\"NORMAL\")\n    @allure.label(\"priority\", \"normal\")\n    def test_scenario(self):\n        # Arrange\n        base_url = \"https://compute.api.cloud.ru\"\n        vm_id = \"a4a95988-3907-4724-ad06-a7bd42ac5680\" # Example UUID\n        endpoint = f\"/api/v1/vms/{vm_id}\"\n        token = os.getenv(\"CLOUD_API_TOKEN\") # Security fix\n    \n        headers = {\n            \"Authorization\": f\"Bearer {token}\",\n            \"Content-Type\": \"application/json\"\n        }\n    \n        payload = {\n            \"id\": \"a4a95988-3907-4724-ad06-a7bd42ac5680\",\n            \"name\": \"vm-b23603\",\n            \"description\": \"ggfh\",\n            \"tags\": [],\n            \"flavor\": {\n                \"id\": \"139ddd16-2482-4694-991d-9b1834266e03\",\n                \"name\": \"lowcost10-1-1\",\n                \"cpu\": 1,\n                \"ram\": 1,\n                \"gpu\": 0,\n                \"oversubscription\": \"1:10\",\n                \"free_tier\": False,\n                \"flavor_type\": {\n                    \"id\": \"816996c3-8c9a-4545-b70d-d9035ce3afea\",\n                    \"name\": \"general-10\",\n                    \"old_name\": \"general\",\n                    \"display_name\": \"Общий 1:10\",\n                    \"description\": None,\n                    \"cpu_type\": \"Intel Broadwell EP Xeon E5-2699\",\n                    \"gpu_type\": None,\n                    \"oversubscription\": \"1:10\"\n                }\n            },\n            \"state\": \"running\",\n            \"locked\": False,\n            \"image\": {\n                \"id\": \"474c9e98-760f-4e54-aaa9-70024814f2b0\",\n                \"name\": \"ubuntu-22.04\",\n                \"free_tier_enabled\": True,\n                \"type\": \"public\",\n                \"display_name\": \"Ubuntu 22.04\"\n            },\n            \"created_time\": \"2025-12-11T16:36:45+00:00\",\n            \"modified_time\": \"2025-12-11T16:40:42+00:00\",\n            \"disks\": [\n                {\n                    \"id\": \"75866b53-2f19-4d93-b24b-4da3f4339a6d\",\n                    \"name\": \"vm-b23603-disk-bc5637\",\n                    \"primary\": True,\n                    \"size\": 10,\n                    \"state\": \"in_use\",\n                    \"serial_id\": \"74773824c8797cc\",\n                    \"tags\": [],\n                    \"disk_type\": {\n                        \"id\": \"a859e3dc-6b14-42a8-9bcc-890fde0ba6d0\",\n                        \"name\": \"SSD\"\n                    },\n                    \"limit_bw\": 64,\n                    \"limit_rate\": 2000,\n                    \"limit_lock\": False\n                }\n            ],\n            \"metadata_fields\": [\n                {\n                    \"id\": \"3ab40d69-e6a8-4322-9aac-7b66a9de0b8e\",\n                    \"metadata_id\": \"5971d962-91e7-4072-ba3a-6553c61918ec\",\n                    \"name\": \"name\",\n                    \"display_name\": \"Логин\",\n                    \"value\": \"user1\"\n                },\n                {\n                    \"id\": \"3d7f531f-63db-4775-9b4b-0ba08bad99b8\",\n                    \"metadata_id\": \"0a7d05b5-bb69-4422-9a66-2c9c67522599\",\n                    \"name\": \"hostname\",\n                    \"display_name\": \"Имя хоста\",\n                    \"value\": \"vm-b23603\"\n                }\n            ],\n            \"interfaces\": [\n                {\n                    \"id\": \"bc47619e-13c6-43f7-b96e-d4db6285240b\",\n                    \"name\": \"eth_363ac100-aadc-480e-8c01-908cda71f13c\",\n                    \"ip_address\": \"10.0.0.5\",\n                    \"security_groups\": [\n                        {\n                            \"id\": \"689ae1cd-4eb6-4c62-94ea-21c1bffa1996\",\n                            \"name\": \"SSH-access_ru.AZ-1\",\n                            \"state\": \"created\"\n                        }\n                    ],\n                    \"floating_ip\": None,\n                    \"primary\": True,\n                    \"type\": \"regular\",\n                    \"interface_security_enabled\": True,\n                    \"state\": \"created\",\n                    \"subnet\": {\n                        \"id\": \"abb61c39-8a65-4735-8d65-55174b795163\",\n                        \"name\": \"Default_ru.AZ-1\",\n                        \"state\": \"creatnulled\",\n                        \"routed_network\": True,\n                        \"subnet_address\": \"10.0.0.0/24\",\n                        \"vpc_id\": \"8388a054-6431-486f-a1de-3dc3b7f22e1e\"\n                    }\n                }\n            ],\n            \"project\": {\n                \"id\": \"4582273a-e0e7-4fb4-b284-8a91cb03d106\",\n                \"product_instance_id\": \"e88a5d74-bdc9-4f89-a0ec-c32bd9228c00\"\n            },\n            \"availability_zone\": {\n                \"id\": \"7c99a597-8516-494f-a2c7-d7377048681e\",\n                \"name\": \"ru.AZ-1\",\n                \"enabled\": True\n            },\n            \"vnc_url\": None,\n            \"vnc_ws\": None,\n            \"remote_console_url\": None,\n            \"remote_console_ws\": None,\n            \"remote_console_protocol\": None,\n            \"placement_group\": None,\n            \"is_serial_ready\": True,\n            \"guest_agent_state\": \"enabled\"\n        }\n    \n        # Act\n        with allure.step(f\"PUT {endpoint}\"):\n            response = requests.put(base_url + endpoint, headers=headers, json=payload)\n    \n        # Assert\n        with allure.step(\"Check Status Code 200\"):\n>           assert response.status_code == 200, f\"Expected 200, got {response.status_code}\"\nE           AssertionError: Expected 200, got 422\nE           assert 422 == 200\nE            +  where 422 = <Response [422]>.status_code\n\ntest_put_update_vm_api.py:149: AssertionError"}, "steps": [{"name": "PUT /api/v1/vms/a4a95988-3907-4724-ad06-a7bd42ac5680", "status": "passed", "start": 1765478790874, "stop": 1765478791316}, {"name": "Check Status Code 200", "status": "failed", "statusDetails": {"message": "AssertionError: Expected 200, got 422\nassert 422 == 200\n +  where 422 = <Response [422]>.status_code\n", "trace": "  File \"/home/muhammad/Dev/HACKATHON/Moscow/cloud.ru/test/test_put_update_vm_api.py\", line 149, in test_scenario\n    assert response.status_code == 200, f\"Expected 200, got {response.status_code}\"\n"}, "start": 1765478791316, "stop": 1765478791317}], "start": 1765478790874, "stop": 1765478791318, "uuid": "4b01e883-34d7-4a6d-b32c-4a2898d14fca", "historyId": "2cdfd4cdffc46c22fc7bbd831bb12154", "testCaseId": "2cdfd4cdffc46c22fc7bbd831bb12154", "fullName": "test_put_update_vm_api.TestVMUpdateAPI#test_scenario", "labels": [{"name": "story", "value": "Story: VMUpdateAPI"}, {"name": "priority", "value": "normal"}, {"name": "suite", "value": "API"}, {"name": "feature", "value": "VMUpdateAPI"}, {"name": "tag", "value": "NORMAL"}, {"name": "subSuite", "value": "TestVMUpdateAPI"}, {"name": "host", "value": "222"}, {"name": "thread", "value": "111349-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_put_update_vm_api"}], "links": [{"type": "link", "url": "https://jira.cloud.ru/browse/TASK-PENDING", "name": "Related Task"}, {"type": "link", "url": "https://jira.cloud.ru/browse/TASK-API-VM-UPDATE", "name": "API Docs"}], "titlePath": ["test_put_update_vm_api.py", "TestVMUpdateAPI"]}