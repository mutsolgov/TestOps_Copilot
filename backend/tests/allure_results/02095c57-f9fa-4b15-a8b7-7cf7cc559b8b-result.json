{"name": "API Test: Delete VM", "status": "failed", "statusDetails": {"message": "AssertionError: Expected 204, got 401\nassert 401 == 204\n +  where 401 = <Response [401]>.status_code", "trace": "self = <test_vm_6_delete_vm_api.TestVMDeletionAPI object at 0x7effa38bfb10>\n\n    @allure.title(\"API Test: Delete VM\")\n    @allure.link(\"https://jira.cloud.ru/browse/TASK-PENDING\", name=\"Related Task\")\n    @allure.tag(\"NORMAL\")\n    @allure.label(\"priority\", \"normal\")\n    def test_scenario(self):\n        # Arrange\n        base_url = \"https://compute.api.cloud.ru\"\n    \n        # Configuration\n        vm_id = os.getenv(\"TEST_VM_ID_DEL\")\n        disk_id = os.getenv(\"TEST_DISK_VM_ID_DEL\")\n        external_ips = os.getenv(\"TEST_EXTERNAL_IPS\") # если ip нет оставьте просто []\n        token = os.getenv(\"CLOUD_API_TOKEN\")\n    \n        # Validation\n        error_msg = \"Please set TEST_VM_ID, TEST_DISK_VM_ID and TEST_EXTERNAL_IPS in your .env file\"\n        assert vm_id, error_msg\n        assert disk_id, error_msg\n        assert external_ips is not None, error_msg\n    \n        endpoint = f\"/api/v1/vms/{vm_id}\"\n    \n        headers = {\n            \"Authorization\": f\"Bearer {token}\",\n            \"Content-Type\": \"application/json\"\n        }\n    \n        # Process external_ips string to list\n        ips_list = [ip.strip() for ip in external_ips.split(',')] if external_ips else []\n    \n        payload = {\n          \"delete_attachments\": {\n            \"disk_ids\": [disk_id],\n            \"external_ips\": ips_list\n          }\n        }\n    \n        # Act\n        with allure.step(f\"DELETE {endpoint}\"):\n            response = requests.request(\"DELETE\", base_url + endpoint, headers=headers, json=payload)\n    \n        # Assert\n        with allure.step(\"Check Status Code 204\"):\n>           assert response.status_code == 204, f\"Expected 204, got {response.status_code}\"\nE           AssertionError: Expected 204, got 401\nE           assert 401 == 204\nE            +  where 401 = <Response [401]>.status_code\n\ntest_vm_6_delete_vm_api.py:54: AssertionError"}, "steps": [{"name": "DELETE /api/v1/vms/0b396a8f-e0a6-4716-a800-9595da57aa90", "status": "passed", "start": 1765706458044, "stop": 1765706458453}, {"name": "Check Status Code 204", "status": "failed", "statusDetails": {"message": "AssertionError: Expected 204, got 401\nassert 401 == 204\n +  where 401 = <Response [401]>.status_code\n", "trace": "  File \"/home/muhammad/Dev/HACKATHON/Moscow/cloud.ru/Github/TestOps_Copilot/backend/tests/test_vm_6_delete_vm_api.py\", line 54, in test_scenario\n    assert response.status_code == 204, f\"Expected 204, got {response.status_code}\"\n"}, "start": 1765706458453, "stop": 1765706458453}], "start": 1765706458044, "stop": 1765706458455, "uuid": "af140f11-8298-4857-90a9-2e3c71f8d406", "historyId": "5cc1d41707439351baa13d8fe7805afd", "testCaseId": "5cc1d41707439351baa13d8fe7805afd", "fullName": "test_vm_6_delete_vm_api.TestVMDeletionAPI#test_scenario", "labels": [{"name": "feature", "value": "VMDeletionAPI"}, {"name": "tag", "value": "NORMAL"}, {"name": "suite", "value": "API"}, {"name": "priority", "value": "normal"}, {"name": "story", "value": "Story: VMDeletionAPI"}, {"name": "subSuite", "value": "TestVMDeletionAPI"}, {"name": "host", "value": "222"}, {"name": "thread", "value": "307731-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_vm_6_delete_vm_api"}], "links": [{"type": "link", "url": "https://jira.cloud.ru/browse/TASK-PENDING", "name": "Related Task"}, {"type": "link", "url": "https://jira.cloud.ru/browse/TASK-API-VM-DELETE", "name": "API Docs"}], "titlePath": ["test_vm_6_delete_vm_api.py", "TestVMDeletionAPI"]}