{"name": "API Test: Create VM with Lifecycle", "status": "failed", "statusDetails": {"message": "Failed: Expected 201, got 422. Response: [{\"message\":\"Organization quota for vcpus exceeded\",\"code\":\"organization_quota_exceeded\"}]", "trace": "@pytest.fixture(scope=\"function\")\n    def create_vm_and_cleanup():\n        base_url = \"https://compute.api.cloud.ru\"\n        endpoint = \"/api/v1/vms\"\n        token = os.getenv(\"CLOUD_API_TOKEN\")\n        project_id = os.getenv(\"TEST_PROJECT_ID\")\n        ssh_key = os.getenv(\"TEST_SSH_PUBLIC_KEY\")\n    \n        # Optional with defaults\n        az_id = os.getenv(\"TEST_AZ_ID\", \"7c99a597-8516-494f-a2c7-d7377048681e\")\n        flavor_id = os.getenv(\"TEST_FLAVOR_ID\", \"139ddd16-2482-4694-991d-9b1834266e03\")\n        image_id = os.getenv(\"TEST_IMAGE_ID\", \"474c9e98-760f-4e54-aaa9-70024814f2b0\")\n        subnet_id = os.getenv(\"TEST_SUBNET_ID\", \"abb61c39-8a65-4735-8d65-55174b795163\")\n        disk_type_id = os.getenv(\"TEST_DISK_TYPE_ID\", \"a859e3dc-6b14-42a8-9bcc-890fde0ba6d0\")\n    \n        if not all([token, project_id, ssh_key]):\n            pytest.skip(\"Skipping VM test: Missing required env vars (CLOUD_API_TOKEN, TEST_PROJECT_ID, TEST_SSH_PUBLIC_KEY)\")\n    \n        headers = {\n            \"Authorization\": f\"Bearer {token}\",\n            \"Content-Type\": \"application/json\"\n        }\n    \n        import time\n        import base64\n        unique_suffix = int(time.time())\n        vm_name = f\"test-vm-{unique_suffix}\"\n        disk_name = f\"root-disk-{unique_suffix}\"\n    \n        # 2. Prepare Cloud-init with embedded SSH key\n        cloud_init_raw = f'''\n    #cloud-config\n    users:\n      - name: ubuntu\n        ssh-authorized-keys:\n          - {ssh_key}\n        sudo: ALL\n    '''\n        cloud_init_b64 = base64.b64encode(cloud_init_raw.encode(\"utf-8\")).decode(\"utf-8\")\n    \n        payload = [\n          {\n            \"project_id\": project_id,\n            \"name\": vm_name,\n            \"flavor_id\": flavor_id,\n            \"image_id\": image_id,\n            \"availability_zone_id\": az_id, # AZ at root level\n            \"disks\": [\n                {\n                    \"name\": disk_name, # Correct field name\n                    \"disk_type_id\": disk_type_id,\n                    \"size\": 10\n                }\n            ],\n            \"subnets\": [\n                {\n                    \"subnet_id\": subnet_id\n                }\n            ],\n            \"description\": \"Auto-generated test VM\",\n            \"cloud_init\": cloud_init_b64 # Cloud-init at root level, Base64\n          }\n        ]\n    \n        request_body = json.dumps(payload, indent=2)\n        with allure.step(\"1. Attach VM Payload\"):\n            allure.attach(request_body, name=\"VM Request Body\", attachment_type=allure.attachment_type.JSON)\n    \n        with allure.step(f\"2. Execute POST {endpoint}\"):\n            response = requests.post(base_url + endpoint, headers=headers, json=payload)\n    \n        with allure.step(\"3. Check Status Code 201\"):\n            if response.status_code != 201:\n>                pytest.fail(f\"Expected 201, got {response.status_code}. Response: {response.text}\")\nE                Failed: Expected 201, got 422. Response: [{\"message\":\"Organization quota for vcpus exceeded\",\"code\":\"organization_quota_exceeded\"}]\n\ntest_vm_3_post_api.py:106: Failed"}, "start": 1765715671556, "stop": 1765715671556, "uuid": "0ee9b541-bf35-40c3-b218-3fa9786b842a", "historyId": "01a5fb23c88c918433b0bcbe58d59035", "testCaseId": "01a5fb23c88c918433b0bcbe58d59035", "fullName": "test_vm_3_post_api.TestVMCreationAPI#test_scenario", "labels": [{"name": "suite", "value": "API"}, {"name": "feature", "value": "VMCreationAPI"}, {"name": "tag", "value": "NORMAL"}, {"name": "priority", "value": "normal"}, {"name": "story", "value": "Story: VMCreationAPI"}, {"name": "subSuite", "value": "TestVMCreationAPI"}, {"name": "host", "value": "222"}, {"name": "thread", "value": "315493-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_vm_3_post_api"}], "links": [{"type": "link", "url": "https://jira.cloud.ru/browse/TASK-PENDING", "name": "Related Task"}, {"type": "link", "url": "https://jira.cloud.ru/browse/TASK-API-VM-CREATE", "name": "API Docs"}], "titlePath": ["test_vm_3_post_api.py", "TestVMCreationAPI"]}